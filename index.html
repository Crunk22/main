<script>
    const last_updated = "2024-06-10T02:15:34+0000";
    var threads = [143975428, 144000789]
</script>

<!DOCTYPE html>
<html lang="en">
<body><div class="container">
    <h2>Blimbo and His Friend</h2>
    <a id="last-updated">Last updated: </a>

    <!-- there are custom tags for adding dropdowns/co post references/co images -->
    <!-- do <dropset title="whatever"></dropset> to setup one and put the content inside-->
    <!-- do <ref post="post #"> to add a refference to a /co/ post from one of the threads-->
    <!-- also any /co/ images are done with <img class="co-image" post="post #" desu="desuarchive file location, eg: 1717/83/1717834618338.png">-->

    <div class="top-gif">
        <table style="width: 100%; text-align: left; overflow: scroll;"><th style="width: 60%"></th><th>
            <table>
                <tr><a href="https://github.com/blimborepo/blimbo">>>Contribute to this page</a></tr>
                <tr>
                    <h4><br><a href="https://boards.4chan.org/co/thread/144000789">>>Current Thread</a></h4>
                    <dropset title="Thread Archives">
                        <ol start="0" class="past-threads-list">
                            <li><a href="https://desuarchive.org/co/thread/143960497/#143968278" target="_blank">>>143960497 (Origin)</a></li>
                        </ol>
                    </dropset>
                </tr>
            </table>
        </th></table>
    </div>
    
    <h4>DEFINITIVE Lore Info - Popular ideas in the thread will update stuff here...</h4><br>
    <dropset class="active" title="<h4>Premise:</h4>">
        <p>
            The all new /co/ series <i>Blimbo and His Friend</i>
            (previously <span class="co-link" post="143980417, 144009762"><i>The Fagtitiously Retarded Fagntics of Blimbo and His Friend</i></span>) 
            follows the misadventures of the titular Blimbo and His Friend as they team-up with random, often dysfunctional, collaborators
            to attempt to pitch a successful <span class="co-link" post="143977698, 143977790">comic/cartoon</span>, all the while navigating the day-to-day
            encounters with their eccentric roommate couple Doodle and Glimbo as well as the absurd world they find themselves in. The show 
            satirizes many of the typical tropes of animated television along with prominent <span class="co-link" post="143980760">archetypes 
            inhabiting/orbiting its industry</span>, primarily those of notoriety to /co/.
        </p>
        <p>
            <span class="co-link" post="143987561">The series is set in an over-industrialised metropolis made up of physically impossible haphazard 
            architecture</span> and inhabited by an equally chaotic assortment of every possible type of creature. This eclectic population of cartoon characters both
            represents and features the various mindsets and stylings of /co/ and the broader cartoon community, 
            <span class="co-link" post="143990392 ">a few of which will be focused on when they cross paths and try to make a comic/cartoon with the main cast.</span>
        </p>
    </dropset>
    <dropset class="active" title="<h4>Characters:</h4>">
        <dropset title="Blimbo:">
            <img class="co-image" post="143993964" desu="1717/83/1717834618338.png">
        </dropset>
        <dropset title="His Friend:">
            <img class="co-image" post="143986284" desu="1717/78/1717788629676.png">
        </dropset>
        <dropset title="Doodle:">
            <img class="co-image" post="143987062" desu="1717/79/1717791887688.png">
        </dropset>
        <dropset title="Hot Glimbo:">
            <img class="co-image" post="143993972" desu="1717/83/1717834710683.png">
        </dropset>
        <dropset title="Others:">
            <dropset title="His Enemy:"></dropset>
            <dropset title="Kevin:"></dropset>
            <dropset title="Brick:"></dropset>
        </dropset>
    </dropset>
    <dropset class="active" title="<h4>Episode Ideas:</h4>">
        <dropset title="Cup of Sugar">
            <p class="co-link" post="143976055">One day Blimbo went to HisFriendLand to ask His Friend for a cup of sugar, but His Friend could not give him a cup of sugar, for the Ants had already borrowed the sugar. So Blimbo and His Friend went to see the Ants. The two went to AntLand to ask the Ants if they could have their cup of sugar back. But the Ants needed the sugar for their Sunday Pie, and they had run out before they could finish it. However, they knew a Baker that knew how to make sugar. So Blimbo, His Friend, and the Ants went to see the Baker. The three went to BakerLand to ask the Baker if he could make the Ants enough sugar for their Sunday Pie, so His Friend can give Blimbo a cup of sugar. But the Baker forgot the recipe, and only the Baker's Brain remembered. So Blimbo, His Friend, the Ants, and the Baker all went to see the Baker's Brain. The four went to Baker'sBrainLand to ask the Baker's Brain if he could help the Baker remember the recipe for sugar, so the Baker could make the Ants their Sunday Pie, so His Friend could give Blimbo a cup of sugar. But thinking about it gave the Baker's Brain a brain freeze, and he needed a nice, woolly hat to keep his mind warm and pure. Unfortunately for the Barker's Brain, the Baker, the Ants, and His Friend, Blimbo was rather exhausted by this point. "I've travelled Next Door, through the Big Anthill, over the Baker's Dozen, and into the Day Dreams. I think I'd rather have a salad instead." And so Blimbo, His Friend, the Ants, the Baker, and the Baker's Brain all enjoyed a nice leafy treat under the warm, inviting rays of the sun. The End.</p>
            <div class="co-link" post="143982165">Attempted short animation of this story - One Shot</div>
            <video width="100%" controls>
                <source src="https://files.catbox.moe/ognkwa.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </dropset>
        <dropset title="The Brownie Inccident">
            <p>
                <span class="co-link" post="143985483">A stoned Doodle accidentally mistakes Blimbo for his girlfriend and they bang.</span>
                <span class="co-link" post="143985660, 143985717 ">Blimbo, overwhelmed by being treated like a woman for once and high off of the weed brownies she accidentally ate</span>,
                <span class="co-link" post="143985660 ">goes through with it despite otherwise despising him.</span>
            </p>
        </dropset>
    </dropset>
    <dropset title="<h4>Miscellaneous:</h4>">
        <img class="co-image" post="144011962" desu="1717/95/1717955982979.png">
        <img class="co-image" post="144011365" desu="1717/95/1717952077652.png">
        <img class="co-image" post="144010095" desu="1717/94/1717943417918.png">
    </dropset>
    
</div></body>
<script>
    function toggle_dropdown(element) {
        //console.log("Toggling dropdown for:", element);
        element.classList.toggle("active");
        var content = element.nextElementSibling;

        if (content.style.maxHeight) {
            element.style.backgroundImage = "url('https://cdn-icons-png.flaticon.com/512/60/60781.png";
            content.style.maxHeight = null;
        } else {
            element.style.backgroundImage = "url('https://cdn-icons-png.flaticon.com/512/566/566094.png')";
            content.style.display = "block";
            content.style.maxHeight = content.scrollHeight + "px";
            
            // Recalculate the height for all parent elements
            var parentContent = content.parentNode;
            while (parentContent.classList.contains("content")) {
            parentContent.style.display = "block";
            parentContent.style.maxHeight = parseInt(parentContent.style.maxHeight) + parseInt(content.scrollHeight) + "px";
            parentContent = parentContent.parentNode;
            }
        }
    }

    //create dropdowns from divs
    var dropdowns = document.getElementsByTagName("dropset");

    for (let i = 0; i < dropdowns.length;) {
        var dropdown = dropdowns[i];

        var dropdown_button = document.createElement('button');
        dropdown_button.classList.add('dropdown-button');

        var dropdown_title = document.createElement('span');
        dropdown_title.classList.add('dropdown-text');
        dropdown_title.innerHTML = dropdown.getAttribute('title');;
        dropdown_button.appendChild(dropdown_title);

        var dropdown_content = document.createElement('div');
        dropdown_content.classList.add('content');

        dropdown_content.innerHTML = dropdown.innerHTML;
        dropdown.insertAdjacentElement('afterend', dropdown_content);
        dropdown.insertAdjacentElement('afterend', dropdown_button);

        if (dropdown.classList.contains('active')) {
            dropdown_button.classList.add('active');
        }

        dropdown.remove();

        dropdown_button.addEventListener("click", function() {
            toggle_dropdown(this)
        });
    };

    //open all dropdowns toggled by default
    document.addEventListener("DOMContentLoaded", function() {
        window.onload = function() {
            let actives = Array.from(document.getElementsByClassName("active"));
            for (let i = 0; i < actives.length; i++) {
                actives[i].classList.toggle("active");
                toggle_dropdown(actives[i])
            }
        }
    });

    document.getElementsByClassName("top-gif")[0].style.backgroundImage = "url('https://desu-usergeneratedcontent.xyz/co/image/1717/96/1717966876506.gif";

    //fill past thread list
    var threads_list = document.getElementsByClassName("past-threads-list")[0]
    threads.forEach(function(thread, index) {
        let link = document.createElement('a');
        link.textContent = ">>"+String(thread);
        if (index === threads.length - 1) {
            link.textContent += ' (Current)'
        }
        link.setAttribute('href', 'https://desuarchive.org/co/thread/'+String(thread))
        let list_item = document.createElement('li');
        list_item.appendChild(link)
        threads_list.appendChild(list_item)
    });

    //link images from /co/ back to /co/
    var co_images = Array.from(document.getElementsByClassName("co-image"));
    co_images.forEach(function(co_image) {
        co_image.setAttribute('src', 'https://desu-usergeneratedcontent.xyz/co/image/' + co_image.getAttribute('desu'))
        let link = document.createElement('a');
        let thread_to_link = null;
        threads.forEach(function(thread) {
            if (thread < parseInt(co_image.getAttribute('post'))) {
                thread_to_link = thread;
            }
        })
        link.setAttribute('href', 'https://desuarchive.org/co/thread/'+String(thread_to_link)+'/#'+co_image.getAttribute('post'))
        co_image.insertAdjacentElement('beforeBegin', link);
        link.appendChild(co_image);
    })

    // /co/ reference ---- co-link
    var co_links = Array.from(document.getElementsByClassName("co-link"));
    co_links.forEach(function(co_link) {
        let posts = co_link.getAttribute('post').replace(/\s/g, "").split(',');
        let post_links = [];
        posts.forEach(function(post) {
            post_thread = 0
            threads.forEach(function(thread) {
                if (thread < parseInt(post)) {
                    post_thread = thread
                }
            })
            post_links.push(String(post_thread)+'/#'+post);
        })

        var words = co_link.innerHTML.split(" ");
        var last_word = words[words.length - 1];
        var text_without_last = words.slice(0, -1).join(" ");

        let reference_html = ' <span style="white-space: nowrap;">'+last_word+'<sup class="reference">['
        post_links.forEach(function(post_link, i){
            if (i>0) {
                reference_html += ']['
            }
            reference_html += '<a href=https://desuarchive.org/co/thread/'+post_link+'>'+posts[i]+'</a>';
        }) 
        reference_html += ']</sup></span>'

        co_link.innerHTML = text_without_last + reference_html;
    })

    const last_updated_date = new Date(last_updated);
    // Get the current date and time
    const now = new Date();

    // Function to determine if the user's locale typically uses day/month/year format
    function usesDayMonthYear(locale) {
        const format = new Intl.DateTimeFormat(locale).formatToParts(new Date(2000, 11, 31));
        return format.find(part => part.type === 'day').value === '31';
    }

    // Get user's locale (language-country code, e.g., "en-US")
    const userLocale = navigator.language;

    // Determine date format based on locale
    const dateOptions = usesDayMonthYear(userLocale) ? 
        { day: '2-digit', month: '2-digit', year: 'numeric' } : 
        { month: '2-digit', day: '2-digit', year: 'numeric' };

    const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit' };

    // Format the last updated date to user's time zone with appropriate date format
    const formattedDate = `${new Intl.DateTimeFormat(userLocale, dateOptions).format(last_updated_date)} ${new Intl.DateTimeFormat(userLocale, timeOptions).format(last_updated_date)}`;

    // Calculate the time difference in milliseconds
    const timeDifference = now - last_updated_date;

    // Convert time difference to a human-readable format
    const seconds = Math.floor((timeDifference / 1000) % 60);
    const minutes = Math.floor((timeDifference / (1000 * 60)) % 60);
    const hours = Math.floor((timeDifference / (1000 * 60 * 60)) % 24);
    const days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));

    // Create a string for the time difference
    let timeDifferenceString = "";
    if (days > 0) timeDifferenceString += `${days} days `;
    if (hours > 0) timeDifferenceString += `${hours} hours `;
    if (minutes > 0) timeDifferenceString += `${minutes} minutes `;
    if (seconds > 0) timeDifferenceString += `${seconds} seconds`;

    // Display the formatted date with the time difference
    document.getElementById("last-updated").textContent += `${formattedDate}`; //(${timeDifferenceString} ago)

</script>

<head>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        a {
            color: red; /* Change the link color to red */
        }

        p {
            margin-bottom: 20px; /* Adjust the value as needed */
        }

        :root {
        --viewport-height: 100vh; /* Define a custom property for the viewport height */
        }

        body {
            -webkit-text-size-adjust: 180%;
            text-rendering: optimizeLegibility;
            font-size: 1.2em;
            display: flex;
            justify-content: center;
            font-family: Arial, sans-serif;
            overflow-y: scroll;
        }

        .container {
            padding: 1%;
            width: 100%;
            max-width: 100vh;
            min-width: 50%;
        }

        .dropdown-button {
            background-image: url('https://cdn-icons-png.flaticon.com/512/60/60781.png');
            background-size: cover;
            background-position: center;
            cursor: pointer;
            width: 1em;
            height: 1em;
            border: none;
            text-align: left;
            outline: none;
            margin-bottom: 0.5em;
        }

        .dropdown-text{
            font-size: 1.3em;
            user-select: text;
            position: relative;
            top: -0.15em;
            left: 1.5em;
            white-space: nowrap;
            display: inline-block;
        }
        
        .collapsible:hover {
            background-color: #999;
        }
        
        .content {
            padding-left: 1.5em;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
        }

        .top-gif {
            overflow: scroll;
            padding: 5%;
            width: 100%;
            height: 40vmin;
            background-size: 70%;
            background-position: left;
            background-repeat: no-repeat;
        }

        .reference {
            font-size: smaller;
            vertical-align: super;
        }

        .co-image {
            width: 100%;
        }

        *::-webkit-scrollbar {
            width: 12px;          
        }

        *::-webkit-scrollbar-track {
            background: none;        
        }

        *::-webkit-scrollbar-thumb {
            background-color: #0000009a;    
            border-radius: 20px;
        }
    </style>
</head>

</body>
</html>